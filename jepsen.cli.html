<!DOCTYPE html PUBLIC ""
    "">
<html><head><meta charset="UTF-8" /><title>jepsen.cli documentation</title><link rel="stylesheet" type="text/css" href="css/default.css" /><link rel="stylesheet" type="text/css" href="css/highlight.css" /><script type="text/javascript" src="js/highlight.min.js"></script><script type="text/javascript" src="js/jquery.min.js"></script><script type="text/javascript" src="js/page_effects.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html"><span class="project-title"><span class="project-name">Jepsen</span> <span class="project-version">0.3.6</span></span></a></h1></div><div class="sidebar primary"><h3 class="no-link"><span class="inner">Project</span></h3><ul class="index-link"><li class="depth-1 "><a href="index.html"><div class="inner">Index</div></a></li></ul><h3 class="no-link"><span class="inner">Namespaces</span></h3><ul><li class="depth-1"><div class="no-link"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>jepsen</span></div></div></li><li class="depth-2 branch"><a href="jepsen.adya.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>adya</span></div></a></li><li class="depth-2"><a href="jepsen.checker.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>checker</span></div></a></li><li class="depth-3 branch"><a href="jepsen.checker.clock.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clock</span></div></a></li><li class="depth-3 branch"><a href="jepsen.checker.perf.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>perf</span></div></a></li><li class="depth-3"><a href="jepsen.checker.timeline.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>timeline</span></div></a></li><li class="depth-2 branch current"><a href="jepsen.cli.html"><div class="inner"><span class="tree" style="top: -114px;"><span class="top" style="height: 123px;"></span><span class="bottom"></span></span><span>cli</span></div></a></li><li class="depth-2 branch"><a href="jepsen.client.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>client</span></div></a></li><li class="depth-2 branch"><a href="jepsen.codec.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>codec</span></div></a></li><li class="depth-2"><a href="jepsen.control.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>control</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.clj-ssh.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>clj-ssh</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.core.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.docker.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>docker</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.k8s.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>k8s</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.net.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>net</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.retry.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>retry</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.scp.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>scp</span></div></a></li><li class="depth-3 branch"><a href="jepsen.control.sshj.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>sshj</span></div></a></li><li class="depth-3"><a href="jepsen.control.util.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2 branch"><a href="jepsen.core.html"><div class="inner"><span class="tree" style="top: -300px;"><span class="top" style="height: 309px;"></span><span class="bottom"></span></span><span>core</span></div></a></li><li class="depth-2 branch"><a href="jepsen.db.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>db</span></div></a></li><li class="depth-2 branch"><a href="jepsen.faketime.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>faketime</span></div></a></li><li class="depth-2 branch"><a href="jepsen.fs-cache.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fs-cache</span></div></a></li><li class="depth-2"><a href="jepsen.generator.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>generator</span></div></a></li><li class="depth-3 branch"><a href="jepsen.generator.context.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>context</span></div></a></li><li class="depth-3 branch"><a href="jepsen.generator.interpreter.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>interpreter</span></div></a></li><li class="depth-3 branch"><a href="jepsen.generator.test.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>test</span></div></a></li><li class="depth-3"><a href="jepsen.generator.translation-table.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>translation-table</span></div></a></li><li class="depth-2 branch"><a href="jepsen.independent.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>independent</span></div></a></li><li class="depth-2 branch"><a href="jepsen.lazyfs.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>lazyfs</span></div></a></li><li class="depth-2"><a href="jepsen.nemesis.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>nemesis</span></div></a></li><li class="depth-3 branch"><a href="jepsen.nemesis.combined.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>combined</span></div></a></li><li class="depth-3"><a href="jepsen.nemesis.membership.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>membership</span></div></a></li><li class="depth-4"><a href="jepsen.nemesis.membership.state.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>state</span></div></a></li><li class="depth-3"><a href="jepsen.nemesis.time.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>time</span></div></a></li><li class="depth-2"><a href="jepsen.net.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>net</span></div></a></li><li class="depth-3"><a href="jepsen.net.proto.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>proto</span></div></a></li><li class="depth-2"><a href="jepsen.os.html"><div class="inner"><span class="tree" style="top: -52px;"><span class="top" style="height: 61px;"></span><span class="bottom"></span></span><span>os</span></div></a></li><li class="depth-3 branch"><a href="jepsen.os.centos.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>centos</span></div></a></li><li class="depth-3 branch"><a href="jepsen.os.debian.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>debian</span></div></a></li><li class="depth-3 branch"><a href="jepsen.os.smartos.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>smartos</span></div></a></li><li class="depth-3"><a href="jepsen.os.ubuntu.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>ubuntu</span></div></a></li><li class="depth-2 branch"><a href="jepsen.reconnect.html"><div class="inner"><span class="tree" style="top: -145px;"><span class="top" style="height: 154px;"></span><span class="bottom"></span></span><span>reconnect</span></div></a></li><li class="depth-2 branch"><a href="jepsen.repl.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>repl</span></div></a></li><li class="depth-2 branch"><a href="jepsen.report.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>report</span></div></a></li><li class="depth-2 branch"><a href="jepsen.role.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>role</span></div></a></li><li class="depth-2"><a href="jepsen.store.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>store</span></div></a></li><li class="depth-3 branch"><a href="jepsen.store.format.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>format</span></div></a></li><li class="depth-3"><a href="jepsen.store.fressian.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>fressian</span></div></a></li><li class="depth-2"><a href="jepsen.tests.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>tests</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.adya.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>adya</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.bank.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>bank</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.causal.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.causal-reverse.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>causal-reverse</span></div></a></li><li class="depth-3"><a href="jepsen.tests.cycle.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>cycle</span></div></a></li><li class="depth-4 branch"><a href="jepsen.tests.cycle.append.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>append</span></div></a></li><li class="depth-4"><a href="jepsen.tests.cycle.wr.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>wr</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.kafka.html"><div class="inner"><span class="tree" style="top: -83px;"><span class="top" style="height: 92px;"></span><span class="bottom"></span></span><span>kafka</span></div></a></li><li class="depth-3 branch"><a href="jepsen.tests.linearizable-register.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>linearizable-register</span></div></a></li><li class="depth-3"><a href="jepsen.tests.long-fork.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>long-fork</span></div></a></li><li class="depth-2 branch"><a href="jepsen.util.html"><div class="inner"><span class="tree" style="top: -331px;"><span class="top" style="height: 340px;"></span><span class="bottom"></span></span><span>util</span></div></a></li><li class="depth-2"><a href="jepsen.web.html"><div class="inner"><span class="tree"><span class="top"></span><span class="bottom"></span></span><span>web</span></div></a></li></ul></div><div class="sidebar secondary"><h3><a href="#top"><span class="inner">Public Vars</span></a></h3><ul><li class="depth-1"><a href="jepsen.cli.html#var--main"><div class="inner"><span>-main</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-default-nodes"><div class="inner"><span>default-nodes</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-help-opt"><div class="inner"><span>help-opt</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-merge-opt-specs"><div class="inner"><span>merge-opt-specs</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-one-of"><div class="inner"><span>one-of</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-package-opt"><div class="inner"><span>package-opt</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-parse-concurrency"><div class="inner"><span>parse-concurrency</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-parse-nodes"><div class="inner"><span>parse-nodes</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-rename-keys"><div class="inner"><span>rename-keys</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-rename-options"><div class="inner"><span>rename-options</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-rename-ssh-options"><div class="inner"><span>rename-ssh-options</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-repeated-opt"><div class="inner"><span>repeated-opt</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-run.21"><div class="inner"><span>run!</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-serve-cmd"><div class="inner"><span>serve-cmd</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-single-test-cmd"><div class="inner"><span>single-test-cmd</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-tarball-opt"><div class="inner"><span>tarball-opt</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-test-all-cmd"><div class="inner"><span>test-all-cmd</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-test-all-exit.21"><div class="inner"><span>test-all-exit!</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-test-all-print-summary.21"><div class="inner"><span>test-all-print-summary!</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-test-all-run-tests.21"><div class="inner"><span>test-all-run-tests!</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-test-opt-fn"><div class="inner"><span>test-opt-fn</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-test-opt-spec"><div class="inner"><span>test-opt-spec</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-test-usage"><div class="inner"><span>test-usage</span></div></a></li><li class="depth-1"><a href="jepsen.cli.html#var-validate-tarball"><div class="inner"><span>validate-tarball</span></div></a></li></ul></div><div class="namespace-docs" id="content"><h1 class="anchor" id="top">jepsen.cli</h1><div class="doc"><div class="markdown"><p>Command line interface. Provides a default main method for common Jepsen functions (like the web interface), and utility functions for Jepsen tests to create their own test runners.</p>
</div></div><div class="public anchor" id="var--main"><h3>-main</h3><div class="usage"><code>(-main &amp; args)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L531">view source</a></div></div><div class="public anchor" id="var-default-nodes"><h3>default-nodes</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L18">view source</a></div></div><div class="public anchor" id="var-help-opt"><h3>help-opt</h3><div class="usage"></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L61">view source</a></div></div><div class="public anchor" id="var-merge-opt-specs"><h3>merge-opt-specs</h3><div class="usage"><code>(merge-opt-specs a b)</code></div><div class="doc"><div class="markdown"><p>Takes two option specifications and merges them together. Where both offer the same option name, prefers the latter.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L52">view source</a></div></div><div class="public anchor" id="var-one-of"><h3>one-of</h3><div class="usage"><code>(one-of coll)</code></div><div class="doc"><div class="markdown"><p>Takes a collection and returns a string like “Must be one of …” and a list of names. For maps, uses keys.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L20">view source</a></div></div><div class="public anchor" id="var-package-opt"><h3>package-opt</h3><div class="usage"><code>(package-opt default)</code><code>(package-opt option-name default)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L113">view source</a></div></div><div class="public anchor" id="var-parse-concurrency"><h3>parse-concurrency</h3><div class="usage"><code>(parse-concurrency parsed)</code><code>(parse-concurrency parsed k)</code></div><div class="doc"><div class="markdown"><p>Takes a parsed map. Parses :concurrency; if it is a string ending with n, e.g 3n, sets it to 3 * the number of :nodes. Otherwise, parses as a plain integer. With an optional keyword k, parses that key in the parsed map–by default, the key is :concurrency.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L150">view source</a></div></div><div class="public anchor" id="var-parse-nodes"><h3>parse-nodes</h3><div class="usage"><code>(parse-nodes parsed)</code></div><div class="doc"><div class="markdown"><p>Takes a parsed map and merges all the various node specifications together. In particular:</p>
<ul>
<li>If :nodes-file and :nodes are blank, and :node is the default node list, uses the default node list.</li>
<li>Otherwise, merges together :nodes-file, :nodes, and :node into a single list.</li>
</ul>
<p>The new parsed map will have a merged nodes list in :nodes, and lose :nodes-file and :node options.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L170">view source</a></div></div><div class="public anchor" id="var-rename-keys"><h3>rename-keys</h3><div class="usage"><code>(rename-keys m replacements)</code></div><div class="doc"><div class="markdown"><p>Given a map m, and a map of keys to replacement keys, yields m with keys renamed.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L207">view source</a></div></div><div class="public anchor" id="var-rename-options"><h3>rename-options</h3><div class="usage"><code>(rename-options parsed replacements)</code></div><div class="doc"><div class="markdown"><p>Like rename-keys, but takes a parsed map and updates keys in :options.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L218">view source</a></div></div><div class="public anchor" id="var-rename-ssh-options"><h3>rename-ssh-options</h3><div class="usage"><code>(rename-ssh-options parsed)</code></div><div class="doc"><div class="markdown"><p>Takes a parsed map and moves SSH options to a map under :ssh.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L223">view source</a></div></div><div class="public anchor" id="var-repeated-opt"><h3>repeated-opt</h3><div class="usage"><code>(repeated-opt short-opt long-opt docstring default)</code><code>(repeated-opt short-opt long-opt docstring default parse-map)</code></div><div class="doc"><div class="markdown"><p>Helper for vector options where we want to replace the default vector (checking via identical?) if any options are passed, building a vector for multiple args. If parse-map is provided (a map of string cmdline options to parsed values), the special word “all” can be used to specify every value in the map.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L27">view source</a></div></div><div class="public anchor" id="var-run.21"><h3>run!</h3><div class="usage"><code>(run! subcommands [command &amp; arguments :as argv])</code></div><div class="doc"><div class="markdown"><p>Parses arguments and runs tests, etc. Takes a map of subcommand names to subcommand-specs, and a list of arguments. Each subcommand-spec is a map with the following keys:</p>
<p>:opt-spec       - The option parsing spec to use. :opt-fn         - A function to transform the tools.cli options map, e.g. {:options …, :arguments …, :summary …}. Default: identity :usage          - A usage string (default: “Usage:”) :run            - Function to execute with the transformed options (default: pprint)</p>
<p>If an unrecognized (or no command) is given, prints out a general usage guide and exits.</p>
<p>For a subcommand, if help or –help is given, prints out a help string with usage for the given subcommand and exits with status 0.</p>
<p>If invalid arguments are given, prints those errors to the console, and exits with status 254.</p>
<p>Finally, if everything looks good, calls the given subcommand’s <code>run</code> function with parsed options, and exits with status 0.</p>
<p>Catches exceptions, logs them to the console, and exits with status 255.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L258">view source</a></div></div><div class="public anchor" id="var-serve-cmd"><h3>serve-cmd</h3><div class="usage"><code>(serve-cmd)</code></div><div class="doc"><div class="markdown"><p>A web server command.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L336">view source</a></div></div><div class="public anchor" id="var-single-test-cmd"><h3>single-test-cmd</h3><div class="usage"><code>(single-test-cmd opts)</code></div><div class="doc"><div class="markdown"><p>A command which runs a single test with standard built-ins. Options:</p>
<p>{:opt-spec A vector of additional options for tools.cli. Merge into <code>test-opt-spec</code>. Optional. :opt-fn   A function which transforms parsed options. Composed after <code>test-opt-fn</code>. Optional. :opt-fn*  Replaces test-opt-fn, in case you want to override it altogether. :tarball If present, adds a –tarball option to this command, defaulting to whatever URL is given here. :usage   Defaults to <code>jc/test-usage</code>. Optional. :test-fn A function that receives the option map and constructs a test.}</p>
<p>This comes with two commands: <code>test</code>, which runs a test and analyzes it, and <code>analyze</code>, which constructs a test map using the same arguments as <code>run</code>, but analyzes a history from disk instead.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L355">view source</a></div></div><div class="public anchor" id="var-tarball-opt"><h3>tarball-opt</h3><div class="usage"><code>(tarball-opt default)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L123">view source</a></div></div><div class="public anchor" id="var-test-all-cmd"><h3>test-all-cmd</h3><div class="usage"><code>(test-all-cmd opts)</code></div><div class="doc"><div class="markdown"><p>A command that runs a whole suite of tests in one go. Options:</p>
<p>:opt-spec     A vector of additional options for tools.cli. Appended to test-opt-spec. Optional. :opt-fn       A function which transforms parsed options. Composed after test-opt-fn. Optional. :opt-fn*      Replaces test-opt-fn, instead of composing with it. :usage        Defaults to <code>test-usage</code>. Optional. :tests-fn     A function that receives the transformed option map and constructs a sequence of tests to run.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L501">view source</a></div></div><div class="public anchor" id="var-test-all-exit.21"><h3>test-all-exit!</h3><div class="usage"><code>(test-all-exit! results)</code></div><div class="doc"><div class="markdown"><p>Takes a map of statuses and exits with an appropriate error code: 255 if any crashed, 2 if any were unknown, 1 if any were invalid, 0 if all passed.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L491">view source</a></div></div><div class="public anchor" id="var-test-all-print-summary.21"><h3>test-all-print-summary!</h3><div class="usage"><code>(test-all-print-summary! results)</code></div><div class="doc"><div class="markdown"><p>Prints a summary of test outcomes. Takes a map of statuses (e.g. :crashed, true, false, :unknown), to test files. Returns results.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L461">view source</a></div></div><div class="public anchor" id="var-test-all-run-tests.21"><h3>test-all-run-tests!</h3><div class="usage"><code>(test-all-run-tests! tests)</code></div><div class="doc"><div class="markdown"><p>Runs a sequence of tests and returns a map of outcomes (e.g. true, :unknown, :crashed, false) to collections of test folders with that outcome.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L443">view source</a></div></div><div class="public anchor" id="var-test-opt-fn"><h3>test-opt-fn</h3><div class="usage"><code>(test-opt-fn parsed)</code></div><div class="doc"><div class="markdown"><p>An opt fn for running simple tests. Remaps ssh keys, remaps :node to :nodes, reads :nodes-file into :nodes, and parses :concurrency.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L245">view source</a></div></div><div class="public anchor" id="var-test-opt-spec"><h3>test-opt-spec</h3><div class="usage"></div><div class="doc"><div class="markdown"><p>Command line options for testing.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L64">view source</a></div></div><div class="public anchor" id="var-test-usage"><h3>test-usage</h3><div class="usage"><code>(test-usage)</code></div><div class="doc"><div class="markdown"></div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L127">view source</a></div></div><div class="public anchor" id="var-validate-tarball"><h3>validate-tarball</h3><div class="usage"><code>(validate-tarball parsed)</code></div><div class="doc"><div class="markdown"><p>Takes a parsed map and ensures a tarball is present.</p>
</div></div><div class="src-link"><a href="https://github.com/jepsen-io/jepsen/blob/v0.3.6/jepsen/src/jepsen/cli.clj#L143">view source</a></div></div></div></body></html>